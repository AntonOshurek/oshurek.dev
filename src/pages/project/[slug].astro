---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
//LAYOUTS
import Layout from '../../layouts/Layout.astro';
//COMPONENTS
import ArticlePagePreview from '../../components/article-preview/article-page-preview.astro';
import SharePage from '../../components/share-page/share-page.astro';
//STYLES
import './article.scss';

export const getStaticPaths = async () => {
	const projects = await getCollection('projects');

	const paths = projects.map((project) => {
		return {
			params: {
				slug: project.slug,
			},
			props: {
				project,
			},
		};
	});

	return paths;
};

type Props = {
	project: CollectionEntry<'projects'>;
};

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout
	title={project.data.title}
	description={project.data.overview}
	additionalClassToMain="article-page-main"
	image={project.data.previewImage}
>
	<article class="article container-small">
		<ArticlePagePreview article={project} />
		<Content />
	</article>
	<SharePage text="I will be happy if you share this article with your friends ;)" />
</Layout>
